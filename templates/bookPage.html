{% extends "layout.html" %}

{% block title %}
    Book Page
{% endblock %}

{% block body %}
    <h1 class="bookpage-msg text-center" style="padding: 40px;">Details about {{ book[0]['title']}}</h1>
    <div class="row justify-content-center">
        <div class="col-lg-3  col-md-4 col-sm-12 text-center">
            <img class="bookImage" src="http://covers.openlibrary.org/b/isbn/{{book[0]['isbn']}}-M.jpg" title="Book Image Not Found!"/>   
        </div>
        <div class="col-lg-5  col-md-6 col-sm-12">
            <ul class="list-group list-group-flush text-center">
                <li class="list-group-item"><span style="font-weight:bold;">Title :</span> {{ book[0]['title']}}</li>
                <li class="list-group-item"><span style="font-weight:bold;">Author :</span> {{ book[0]['author']}}</li>
                <li class="list-group-item"><span style="font-weight:bold;">Year :</span> {{ book[0]['year']}}</li>
                <li class="list-group-item"><span style="font-weight:bold;">ISBN :</span> {{ book[0]['isbn']}}</li>
                <li class="list-group-item"><span style="font-weight:bold;">Average rating :</span> {{ average_rating }}</li>
                <li class="list-group-item"><span style="font-weight:bold;"><a href="http://openlibrary.org/isbn/{{ book[0]['isbn']}}" style="font-size: 15px; color : white; text-decoration: underline" target="_blank" onmouseover="this.style.color='#52de97';" 
                    onmouseout="this.style.color='white';">Go to Goodreads page</a></li>
            </ul>
        </div>
    </div>

    
    <hr class="style14">
    {% if allowed %}
        <h1 class="bookpage-msg text-center">Write a Review</h1>
        <div class="row justify-content-center">
            <div class="col-lg-6 col-md-8 col-sm-9">
                <form class="" method="POST">
                    <label style="color:#52de97;">Rating :</label>
                    <div class="custom-control custom-radio custom-control-inline">
                        <input type="radio" id="customRadioInline1" name="rate" value="1" class="custom-control-input">
                        <label class="custom-control-label" for="customRadioInline1" style="color: white;">1</label>
                    </div>
                    <div class="custom-control custom-radio custom-control-inline">
                        <input type="radio" id="customRadioInline2" name="rate" value="2" class="custom-control-input">
                        <label class="custom-control-label" for="customRadioInline2" style="color: white;">2</label>
                    </div>
                    <div class="custom-control custom-radio custom-control-inline">
                        <input type="radio" id="customRadioInline3" name="rate" value="3" class="custom-control-input">
                        <label class="custom-control-label" for="customRadioInline3" style="color: white;">3</label>
                    </div>
                    <div class="custom-control custom-radio custom-control-inline">
                        <input type="radio" id="customRadioInline4" name="rate" value="4" class="custom-control-input">
                        <label class="custom-control-label" for="customRadioInline4" style="color: white;">4</label>
                    </div>
                    <div class="custom-control custom-radio custom-control-inline">
                        <input type="radio" id="customRadioInline5" name="rate" value="5" class="custom-control-input">
                        <label class="custom-control-label" for="customRadioInline5" style="color: white;">5</label>
                    </div>
                    <div class="form-group">
                        <label for="exampleFormControlTextarea1" style="color:#52de97; margin-top: 15px;">Write Your Review About Book:</label>
                        <textarea class="form-control" name="review" rows="3" required></textarea>
                    </div>
                    <input class="btn btn-primary d-block mx-auto px-5" style="margin-bottom: 40px;" type="submit" value="Submit">
            </form>
            {% else %}
                <h2 class="text-center" style="color: #ec8f2e;">Thank you for your review.</h2>
            {% endif %}
        </div>
    </div>


    <hr class="style14">
    {% if reviews %}
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <table class="table table-striped table-dark">
                <thead>
                    <tr>
                        <th scope="col">Username</th>
                        <th scope="col">Rate of 5</th>
                        <th scope="col">Review</th>
                    </tr>
                </thead>
                <tbody>
                    {% for review in reviews %}
                    <tr>
                        <td>{{review['username']}}</td>
                        <td>{{review['rate']}}</td>
                        <td>{{review['review']}}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    {% else %}
        <h2 class="text-center" style="color: #9c3535;">Sorry no reviews for this book!</h2>
        <hr class="style14">
    {% endif %}
{% endblock %}